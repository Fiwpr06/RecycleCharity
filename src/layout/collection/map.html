<!-- Map and Form Section -->
<div class="row g-4 align-items-start">
  <!-- Map Section -->
  <div class="col-lg-7" data-aos="fade-right" data-aos-duration="1000">
    <div class="map-container">
      <div class="map-header mb-4">
        <h3 class="map-title fw-bold">
          <i class="fas fa-map-marker-alt me-2 text-primary"></i>
          Bản đồ điểm thu gom
        </h3>
        <p class="map-subtitle text-muted">Tìm điểm thu gom gần nhất với bạn</p>
      </div>

      <div class="map-search-container mb-3">
        <div class="input-group input-group-lg">
          <span class="input-group-text bg-white border-end-0">
            <i class="fas fa-search text-muted"></i>
          </span>
          <input
            type="text"
            class="form-control border-start-0 shadow-sm"
            placeholder="Nhập địa chỉ của bạn để tìm điểm gần nhất..."
            aria-label="Tìm điểm thu gom"
            id="map-search-input"
          />
          <button class="btn btn-cta" type="button" id="button-search-map">
            <i class="fas fa-search me-2"></i>Tìm kiếm
          </button>
        </div>
      </div>

      <div class="map-wrapper">
        <div
          id="map-placeholder"
          class="map-display rounded-3 shadow-sm"
          style="height: 450px"
        ></div>
      </div>
    </div>
  </div>

  <!-- Registration Form Section -->
  <div class="col-lg-5" data-aos="fade-left" data-aos-duration="1000">
    <div class="registration-card card border-0 shadow-lg">
      <div class="card-header bg-gradient text-white text-center py-4">
        <div class="form-icon mb-2">
          <i class="fas fa-clipboard-list"></i>
        </div>
        <h3 class="card-title mb-0 fw-bold">Biểu mẫu đăng ký</h3>
        <p class="card-subtitle mb-0 opacity-75">
          Điền thông tin để chúng tôi liên hệ
        </p>
      </div>
      <div class="card-body p-3 p-lg-4">
        <!-- Authentication Check -->
        <div id="authRequiredMessage" class="alert alert-warning text-center" style="display: none;">
          <i class="bi bi-exclamation-triangle me-2"></i>
          <strong>Vui lòng đăng nhập để sử dụng dịch vụ thu gom rác!</strong>
          <br>
          <button class="btn btn-primary mt-2" data-bs-toggle="modal" data-bs-target="#authModal" data-tab="login">
            <i class="bi bi-box-arrow-in-right me-2"></i>Đăng nhập ngay
          </button>
        </div>

        <form id="collectionForm" novalidate style="display: none;">
          <!-- Contact Info Row -->
          <div class="row g-3 mb-3">
            <div class="col-md-6">
              <label for="fullName" class="form-label fw-semibold">
                <i class="fas fa-user me-2 text-primary"></i>
                Họ và tên <span class="text-danger">*</span>
              </label>
              <input
                type="text"
                class="form-control shadow-sm"
                id="fullName"
                placeholder="Nhập họ và tên"
                required
              />
              <div class="invalid-feedback">Vui lòng nhập họ và tên.</div>
            </div>
            <div class="col-md-6">
              <label for="phoneNumber" class="form-label fw-semibold">
                <i class="fas fa-phone me-2 text-primary"></i>
                Số điện thoại <span class="text-danger">*</span>
              </label>
              <input
                type="tel"
                class="form-control shadow-sm"
                id="phoneNumber"
                placeholder="Số điện thoại"
                required
                pattern="^\+?\d{10,15}$"
              />
              <div class="invalid-feedback">
                Vui lòng nhập số điện thoại hợp lệ.
              </div>
            </div>
          </div>

          <!-- Address Row -->
          <div class="row g-3 mb-3">
            <div class="col-12">
              <label for="address" class="form-label fw-semibold">
                <i class="fas fa-map-marker-alt me-2 text-primary"></i>
                Địa chỉ thu gom <span class="text-danger">*</span>
              </label>
              <input
                type="text"
                class="form-control shadow-sm"
                id="address"
                placeholder="Nhập địa chỉ cần thu gom"
                required
              />
              <div class="invalid-feedback">Vui lòng nhập địa chỉ thu gom.</div>
            </div>
          </div>
          <!-- Waste Types with Weight -->
          <div class="row g-3 mb-3">
            <div class="col-12">
              <label class="form-label fw-semibold">
                <i class="fas fa-recycle me-2 text-primary"></i>
                Loại rác và khối lượng ước tính
              </label>
              <div class="alert alert-info py-2">
                <small>
                  <i class="bi bi-info-circle me-1"></i>
                  <strong>Bảng giá:</strong> Kim loại (20 xu/kg) • Nhựa (10 xu/kg) • Giấy (5 xu/kg) • Thủy tinh (3 xu/kg)
                </small>
              </div>
              <div class="waste-type-container">
                <div class="row g-2">
                  <!-- Metal -->
                  <div class="col-6 col-md-3">
                    <div class="waste-type-card text-center p-2">
                      <i class="fas fa-cog text-warning fs-4 mb-1"></i>
                      <h6 class="mb-1">Kim loại</h6>
                      <small class="text-muted d-block mb-2">20 xu/kg</small>
                      <div class="input-group input-group-sm">
                        <input type="number" class="form-control" id="metalWeight"
                          placeholder="0" min="0" step="0.1">
                        <span class="input-group-text">kg</span>
                      </div>
                    </div>
                  </div>
                  <!-- Plastic -->
                  <div class="col-6 col-md-3">
                    <div class="waste-type-card text-center p-2">
                      <i class="fas fa-bottle-water text-info fs-4 mb-1"></i>
                      <h6 class="mb-1">Nhựa</h6>
                      <small class="text-muted d-block mb-2">10 xu/kg</small>
                      <div class="input-group input-group-sm">
                        <input type="number" class="form-control" id="plasticWeight"
                          placeholder="0" min="0" step="0.1">
                        <span class="input-group-text">kg</span>
                      </div>
                    </div>
                  </div>
                  <!-- Paper -->
                  <div class="col-6 col-md-3">
                    <div class="waste-type-card text-center p-2">
                      <i class="fas fa-newspaper text-success fs-4 mb-1"></i>
                      <h6 class="mb-1">Giấy</h6>
                      <small class="text-muted d-block mb-2">5 xu/kg</small>
                      <div class="input-group input-group-sm">
                        <input type="number" class="form-control" id="paperWeight"
                          placeholder="0" min="0" step="0.1">
                        <span class="input-group-text">kg</span>
                      </div>
                    </div>
                  </div>
                  <!-- Glass -->
                  <div class="col-6 col-md-3">
                    <div class="waste-type-card text-center p-2">
                      <i class="fas fa-wine-bottle text-primary fs-4 mb-1"></i>
                      <h6 class="mb-1">Thủy tinh</h6>
                      <small class="text-muted d-block mb-2">3 xu/kg</small>
                      <div class="input-group input-group-sm">
                        <input type="number" class="form-control" id="glassWeight"
                          placeholder="0" min="0" step="0.1">
                        <span class="input-group-text">kg</span>
                      </div>
                    </div>
                  </div>
                </div>
              </div>
            </div>
          </div>

          <!-- Estimated Points -->
          <div class="row g-3 mb-3">
            <div class="col-12">
              <div class="alert alert-success text-center py-2">
                <strong>
                  <i class="fas fa-coins me-1"></i>Điểm xu ước tính:
                  <span id="estimatedPoints" class="fw-bold">0</span> xu
                </strong>
                <br>
                <small class="text-muted">Điểm thực tế sẽ được tính dựa trên khối lượng thu gom thực tế</small>
              </div>
            </div>
          </div>

          <!-- Schedule and Notes -->
          <div class="row g-3 mb-3">
            <div class="col-md-6">
              <label for="scheduledDate" class="form-label fw-semibold">
                <i class="fas fa-calendar me-2 text-primary"></i>
                Ngày mong muốn
              </label>
              <input type="date" class="form-control shadow-sm" id="scheduledDate">
            </div>
            <div class="col-md-6">
              <label for="notes" class="form-label fw-semibold">
                <i class="fas fa-sticky-note me-2 text-primary"></i>
                Ghi chú thêm
              </label>
              <input type="text" class="form-control shadow-sm" id="notes"
                placeholder="Thông tin bổ sung...">
            </div>
          </div>

          <!-- Submit Button -->
          <div class="d-grid">
            <button type="submit" class="btn btn-cta btn-lg shadow-sm">
              <i class="fas fa-paper-plane me-2"></i>
              Gửi yêu cầu thu gom
            </button>
          </div>
        </form>
      </div>
    </div>
  </div>
</div>
